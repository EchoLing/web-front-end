# 前端面试题 浏览器相关

### 浏览器的同源策略及规避方法
1. 同源策略

    - 三同：协议相同、域名相同、端口相同
    - 限制：Cookie、LocalStorage和IndexDB 无法读取、DOM 无法获得、AJAX 请求不能发送。

2. 不同源窗口规避方法
    
    - 二级域名Cookie共享：设置document.domain为一级域名，或者设置Cookie，指定domain为二级域名
    - 片段识别符（#）,http://a.com/index.html#fragment,可以通过`hashchange`事件监听变化
    - window.name，监听window.name影响性能
    - 跨文档通讯API（Cross-document messaging），window.postMessage，父子窗口监听`message`事件,HTML5支持

3. Ajax同源规避方法
    
    - 代理服务器，中转数据（开发阶段常用）
    - JSONP，最常规的方法，利用script标签不受同源策略限制，需服务器支持，只能通过GET
    - WebSocket，Origin字段告知服务器来源，保证安全
    - CORS，通过Origin字段保证安全，简单方式（仅限于HEAD,GET,POST）直接请求，非简单方式预检

> 参考1：[阮一峰-浏览器同源政策及其规避方法](http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html) <br/>
> 参考2：[阮一峰-](http://www.ruanyifeng.com/blog/2016/04/cors.html)